<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@600&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="st.css">
        <nav class="flex">
            <div class="main-nav">
                <h3 company-logo">KHABRii</h3>
            </div>
            <div class="nav-links">
                <ul class="flex">
                    <li class="hover-link ipl" onclick="navItemClick('ipl')">IPL</li>
                    <li class="hover-link finance" onclick="navItemClick('finance')">FINANCE</li>
                    <li class="hover-link politics" onclick="navItemClick('politics')">POLITICS</li>
                </ul>
            </div>
            <div class="search-bar flex">
                <input type="text" class="news-input" placeholder="e.g. sports">
                <button class="search-button">search</button>
            </div>
        </nav>
        <main>
            <div class="cards-container container flex">
                
            </div>
           
        </main>
        <template id="templet-news-card">
            <div class="card">
                <div class="card-header">
                    <img class="news-img" src="http:/via.placeholder.com/400x200">
                </div>
                <div class="card-content">
                    <h3 class="news-title">this is the text</h3>
                    <h6 class="news-source">end gadge 26/5/23</h6>
                    <p class="news-description">Lorem ipsum dolor sit amet consectetur adipisicing elit. Commodi maxime nulla aliquid nihil natus repellendus ex quos, eum rerum asperiores laudantium consequatur nam at ut consequuntur laborum sit tempore autem.</p>
                </div>
            </div>
        </template>
        <script src="">
                      var data=[];
window.addEventListener("load",()=>fetchNews("india"));

async function fetchNews(query){
fetch(`https://newsapi.org/v2/everything?q=${query}&apiKey=479bdad0d3eb4b6fa4555200a757181b`)
.then((respond)=>{return respond.json()})
.then((respond)=>{
    data=respond.articles;
    console.log(data)
    bindData(data)
})
// .catch((error)=>{console.log("error")})

}

function bindData(articles){
   const templetCard=document.getElementById("templet-news-card")
   const card_container=document.getElementsByClassName("cards-container")[0]
   
   card_container.innerHTML="";
   articles.forEach(element => {
    if(element.urlToImage==null){return }
    const clonecard=templetCard.content.cloneNode(true)
           fillDataInCard(clonecard,element);
           card_container.appendChild(clonecard)
   });
}
function fillDataInCard(cardClone,article){
    cardClone.querySelector('.news-img').src=article.urlToImage;
    cardClone.querySelector('.news-title').innerHTML=article.title;
    cardClone.querySelector('.news-source').innerHTML=article.source.name;
    cardClone.querySelector('.news-description').innerHTML=article.description
    cardClone.firstElementChild.addEventListener('click',()=>{
        window.open(article.url,'blank')
    })
}
function navItemClick(id)
{
    fetchNews(id)
}
document.querySelector('.search-button').addEventListener('click',()=>{
   fetchNews(document.querySelector('.news-input').value)
})
         </script>
</body>
</html>
